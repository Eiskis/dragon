!function(e){var t=function(e){var t=this;t.doc=e,t.isInitialized=!1,t.isActive=!1,t.toggleKeyCode=27,t.axisModifierKeyCode=16,t.outlineColor="rgba(0, 255, 0, 0.4)",t.outlineHoverColor="rgba(0, 255, 0, 0.8)",t.prefix="dragon-"+Math.random().toString(36).substr(2,9),t.baseStyleNodeId=t.prefix+"-js-base-styles",t.activeStyleNodeId=t.prefix+"-js-active-styles",t.baseAttributeName="data-"+t.prefix+"-touched",t.targetAttributeName="data-"+t.prefix+"-target",t.draggingAttributeName="data-"+t.prefix+"-dragging",t.blockDragDirectionOf=!1,t.modifierKeyPressed=!1,t.grab="",t.oldTop=0,t.oldLeft=0,t.startX=0,t.startY=0,t.getBaseCss=function(){return"["+t.baseAttributeName+"] {position: relative !important;}"},t.getActiveCss=function(){return"["+t.baseAttributeName+"]:hover,["+t.targetAttributeName+"] {cursor: -webkit-grab !important;cursor: -moz-grab !important;cursor: grab !important;outline: 2px solid "+t.outlineColor+" !important;}["+t.draggingAttributeName+"],["+t.baseAttributeName+"]["+t.draggingAttributeName+"] {cursor: -webkit-grabbing !important;cursor: -moz-grabbing !important;cursor: grabbing !important;outline-color: "+t.outlineHoverColor+" !important;}"},t.createStyleNode=function(e,r){var o=t.doc.head||t.doc.getElementsByTagName("head")[0];if(o){var i=t.doc.createElement("style");i.type="text/css",r&&(i.id=r),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.doc.createTextNode(e)),o.appendChild(i)}},t.removeNode=function(e){var r=t.doc.querySelector("#"+e);r&&r.parentNode.removeChild(r)},t.isLegalTarget=function(e){return e!==t.doc.documentElement&&e!==t.doc.body},t.mouseOver=function(e){t.grab.length||t.isLegalTarget(e.target)&&e.target.setAttribute(t.targetAttributeName,t.targetAttributeName)},t.mouseOut=function(e){t.grab.length||t.isLegalTarget(e.target)&&e.target.removeAttribute(t.targetAttributeName)},t.grabStart=function(e){e.preventDefault(),t.isLegalTarget(e.target)&&(t.grab=""+Date.now(),e.target.setAttribute(t.draggingAttributeName,t.draggingAttributeName),e.target.setAttribute(t.baseAttributeName,t.grab),t.oldTop=e.target.style.top.split("px")[0]||0,t.oldLeft=e.target.style.left.split("px")[0]||0),t.startX=e.clientX||e.touches[0].clientX,t.startY=e.clientY||e.touches[0].clientY},t.drag=function(e){if(t.grab.length){var r=t.doc.querySelector("["+t.baseAttributeName+'="'+t.grab+'"]');if(r&&r.style){var o=parseInt((e.clientX||e.touches[0].clientX)-t.startX),i=parseInt((e.clientY||e.touches[0].clientY)-t.startY);t.modifierKeyPressed&&e.pageX&&e.pageY&&(.75*Math.abs(i)>Math.abs(o)?t.blockDragDirectionOf="x":t.blockDragDirectionOf="y");var a=parseInt(t.oldLeft)+o;"x"==t.blockDragDirectionOf&&(a=t.oldLeft);var n=parseInt(t.oldTop)+i;"y"==t.blockDragDirectionOf&&(n=t.oldTop),r.style.left=a+"px",r.style.top=n+"px"}}},t.grabRelease=function(e){t.grab="",t.blockDragDirectionOf=!1,t.oldTop=0,t.oldLeft=0;var r=t.doc.querySelector("["+t.draggingAttributeName+"]");r&&(r.removeAttribute(t.targetAttributeName),r.removeAttribute(t.draggingAttributeName))},t.preventDefaultCallback=function(e){return e.preventDefault(),!1},t.bindBaseListeners=function(){t.doc.addEventListener("keydown",t.toggleButtonCallback)},t.bindActiveListeners=function(){return t.doc.addEventListener("keydown",t.modifierCallbackOn),t.doc.addEventListener("keyup",t.modifierCallbackOff),t.doc.addEventListener("click",t.preventDefaultCallback,!0),t.doc.addEventListener("mousedown",t.grabStart),t.doc.addEventListener("touchstart",t.grabStart),t.doc.addEventListener("mousemove",t.drag),t.doc.addEventListener("touchmove",t.drag),t.doc.addEventListener("mouseup",t.grabRelease),t.doc.addEventListener("touchend",t.grabRelease),t.doc.addEventListener("mouseover",t.mouseOver),t.doc.addEventListener("mouseout",t.mouseOut),t},t.getKeyCode=function(e){return e=e||window.event,e.keyCode||e.which},t.toggleButtonCallback=function(e){t.getKeyCode(e)==t.toggleKeyCode&&t.toggle()},t.modifierCallbackOn=function(e){t.getKeyCode(e)==t.axisModifierKeyCode&&(t.modifierKeyPressed=!0)},t.modifierCallbackOff=function(e){t.getKeyCode(e)==t.axisModifierKeyCode&&(t.modifierKeyPressed=!1,t.blockDragDirectionOf=!1)},t.removeBaseAttributes=function(){var e=t.doc.querySelector("["+t.baseAttributeName+"]");e&&e.removeAttribute(t.baseAttributeName)},t.removeActiveAttributes=function(){var e=t.doc.querySelector("["+t.draggingAttributeName+"]");e&&e.removeAttribute(t.draggingAttributeName)},t.removeBaseListeners=function(){t.doc.removeEventListener("keydown",t.toggleButtonCallback)},t.removeActiveListeners=function(){t.doc.removeEventListener("click",t.preventDefaultCallback,!0),t.doc.removeEventListener("mousedown",t.grabStart),t.doc.removeEventListener("touchstart",t.grabStart),t.doc.removeEventListener("mousemove",t.drag),t.doc.removeEventListener("touchmove",t.drag),t.doc.removeEventListener("mouseup",t.grabRelease),t.doc.removeEventListener("touchend",t.grabRelease),t.doc.removeEventListener("mouseover",t.mouseOver),t.doc.removeEventListener("mouseout",t.mouseOut)},t.init=function(){return t.isInitialized=!0,t.createStyleNode(t.getBaseCss(),t.baseStyleNodeId),t.bindBaseListeners(),t},t.toggle=function(){return t.isActive?t.stop():t.start()},t.start=function(){return t.isInitialized||t.init(),t.isActive=!0,t.createStyleNode(t.getActiveCss(),t.activeStyleNodeId),t.bindActiveListeners(),t},t.stop=function(){return t.isActive=!1,t.removeActiveListeners(),t.removeActiveAttributes(),t.removeNode(t.activeStyleNodeId),t},t.kill=function(){return t.isActive&&t.stop(),t.removeBaseListeners(),t.removeBaseAttributes(),t.removeNode(t.baseStyleNodeId),t}},r="___d";if(e[r]&&e[r].toggle&&"function"==typeof e[r].toggle)e[r].toggle();else{var o=new t(e.document);o.start(),e[r]=o}}(window);